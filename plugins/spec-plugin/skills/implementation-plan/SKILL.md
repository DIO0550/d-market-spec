---
name: implementation-plan
description: 特定機能の実装設計書を作成する。フォルダ構造・コンポーネント設計・移行計画を含む技術的な実装仕様書を生成。プロジェクト全体の設計書にはdesign-docを使うこと。
disable-model-invocation: true
allowed-tools: Bash(mkdir *)
---

# Implementation Plan 作成

特定機能の実装設計書を作成するスキル。

## ⚠️ 重要: システム図は必須

このスキルで生成する実装設計書には**必ずシステム図（状態マシン図 + データフロー図）を含めること**。
システム図がない実装設計書は不完全であり、生成完了とみなさない。

## ワークフロー

```
1. 機能名・目的のヒアリング
   ↓
2. 設計方針の確認
   ↓
3. テンプレートに沿って実装設計書を生成
   ↓
4. ユーザー確認・修正
```

## Step 1: ヒアリング

### 必須項目

**基本情報**
- 機能名
- 設計方針（採用するアーキテクチャパターン、選定理由）

**構造**
- 現在のフォルダ構造
- 将来的なフォルダ構造

**コンポーネント設計**
- 主要コンポーネント（型定義、ファクトリ、ユーティリティ）
- データフロー
- エラーハンドリング方針

**実装状態**
- 実装済みタスク
- 未実装タスク

**移行計画**
- フェーズ分け
- 各フェーズの成果物

## Step 2: 実装設計書生成

ヒアリング結果を元に `.specs/{nnn}-{feature-name}/implementation-plan.md` を生成。

テンプレート: `assets/templates/implementation-plan-template.md`

### Step 2-1: 各セクションを執筆

1. 設計方針
2. **システム図**（状態マシン図 + データフロー図）
3. フォルダ構造（現在・将来）
4. 主要コンポーネントの設計（型定義、実装コード例）
5. 利点
6. 使用例
7. 実装状態（実装済み・未実装）
8. 移行計画（Phase分け）
9. 技術的な詳細（エラーハンドリング、パフォーマンス）

### Step 2-2: システム図を作成

状態マシン図とデータフロー図を**必ず**作成する。
図のフォーマット・チェックリストの詳細は [references/system-diagrams.md](references/system-diagrams.md) を参照。

### コード例の書き方

プロジェクトの使用言語に合わせてコード例を記述する。

```
// src/feature/models/component-a.{ext}

// 型定義（言語に応じた形式）

// ファクトリ/生成関数

// ユーティリティ関数
```

## Step 3: ユーザー確認

生成した実装設計書をユーザーに提示:

1. 設計方針のサマリー
2. 主要コンポーネント一覧
3. 移行計画の概要
4. 「修正が必要な場合はお知らせください」

## 出力

```
.specs/
└── {feature-name}/
    └── implementation-plan.md
```

`{nnn}` は `.specs/` 内の既存フォルダ数に基づく3桁の連番（001, 002, 003...）
`{feature-name}` はケバブケースで命名。
