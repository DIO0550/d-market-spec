{
  "description": "Spec-driven開発のフック群。計画中のAutoCompact対策、図表の強制など。",
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "bash \"${CLAUDE_PLUGIN_ROOT}/hooks/enforce-diagrams.sh\""
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash -c 'files=$(find .specs -name PLANNING 2>/dev/null); if [ -n \"$files\" ]; then echo \"\\n=== SPEC-DRIVEN PLANNING IN PROGRESS ===\\n\" >&2; for f in $files; do dir=$(dirname \"$f\"); echo \"Planning: ${dir##*/}\" >&2; done; echo \"\\nDO NOT IMPLEMENT CODE.\\nContinue planning and spec creation only.\\nAsk user before transitioning to implementation.\\n\" >&2; fi; exit 0'"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash -c '[ -d .specs ] || exit 0; moved=0; for dir in .specs/[0-9][0-9][0-9]-*/; do [ -d \"$dir\" ] || continue; [ -f \"${dir}PLANNING\" ] && continue; mkdir -p .specs/archive && mv \"$dir\" .specs/archive/ && moved=$((moved+1)); done; [ $moved -gt 0 ] && echo \"Archived $moved completed spec(s) to .specs/archive/\" >&2; exit 0'"
          }
        ]
      }
    ]
  }
}
